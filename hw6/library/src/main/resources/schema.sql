DROP TABLE IF EXISTS GENRE;
DROP TABLE IF EXISTS AUTHOR;
DROP TABLE IF EXISTS BOOK;
DROP TABLE IF EXISTS COMMENT;

CREATE TABLE GENRE
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY,
    NAME VARCHAR(50),
    PRIMARY KEY (ID)
);

CREATE TABLE AUTHOR
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY,
    NAME VARCHAR(255)
);

CREATE TABLE BOOK (
    ID BIGINT AUTO_INCREMENT PRIMARY KEY,
    TITLE VARCHAR(50),
    AUTHOR_ID BIGINT NOT NULL,
    GENRE_ID BIGINT NOT NULL,
    FOREIGN KEY (AUTHOR_ID) REFERENCES author (ID) ON DELETE CASCADE,
    FOREIGN KEY (GENRE_ID) REFERENCES genre (ID) ON DELETE SET NULL
);

CREATE TABLE COMMENT
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY,
    BOOK_ID BIGINT NOT NULL,
    TEXT VARCHAR(255),
    FOREIGN KEY (BOOK_ID) REFERENCES book (ID) ON DELETE CASCADE
);

